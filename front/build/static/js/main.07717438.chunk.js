(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{107:function(e,t,r){},108:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),s=r(13),c=r.n(s),i=r(19),o=r(14),l=r(3),u=function(){var e=JSON.parse(localStorage.getItem("userLogged"));return Object(l.jsx)("header",{className:"header",children:Object(l.jsxs)("div",{className:"logged-in-header",children:[Object(l.jsxs)("p",{children:["Hola, ",e.name]}),Object(l.jsx)(i.b,{className:"link",to:"/",onClick:function(){localStorage.removeItem("userLogged"),window.location.replace("/")},children:"LogOut"})]})})},j=function(){var e=window.location.pathname.substring(1);return"login"!==e&&"register"!==e?Object(l.jsx)("header",{className:"header",children:Object(l.jsxs)("div",{className:"not-logged-in-header",children:[Object(l.jsx)(i.b,{className:"link",to:"/register",children:"Register"}),Object(l.jsx)(i.b,{className:"link",to:"/login",children:"Login"})]})}):Object(l.jsx)("header",{className:"header",children:Object(l.jsx)(i.b,{className:"link",to:"/",children:"Main page"})})},d=function(e){var t=e.children;return Object(l.jsxs)("div",{className:"app-wrapper",children:[localStorage.getItem("userLogged")?Object(l.jsx)(u,{}):Object(l.jsx)(j,{}),Object(l.jsx)("div",{className:"content-wrapper",children:t}),Object(l.jsx)("footer",{className:"footer",children:Object(l.jsxs)("small",{children:["Designed and developed by ",Object(l.jsx)("a",{href:"https://www.github.com/octaviocaba",rel:"noreferrer noopener",target:"_blank",className:"link",children:"Octavio Caba"})]})})]})},b=r(8),p=r.n(b),m=r(16),h=r(12),g=function(e){var t=e.handleItemClick,r=e.hour,a=e.availability,n=e.state,s=e.className;return Object(l.jsxs)("li",{id:r,className:s,onClick:t,children:[Object(l.jsx)("p",{children:r}),Object(l.jsx)("p",{children:a}),Object(l.jsx)("p",{children:n})]})},x=r(44),O=r(63),f=r(62),v=r(151),y=r(150),w=r(153),N=r(149),k=r(147),S=r(148),C=r(146),I=function(e){var t=e.open,r=(e.setOpen,e.handleClose);return Object(l.jsx)("div",{children:Object(l.jsxs)(w.a,{open:t,onClose:r,"aria-labelledby":"form-dialog-title",children:[Object(l.jsx)(C.a,{id:"form-dialog-title",children:"Email required"}),Object(l.jsxs)(k.a,{children:[Object(l.jsx)(S.a,{children:"We need an email adress to complete the taxi reservation. If you make a reservation without registrate you will only be able to cancel the reservation through email."}),Object(l.jsx)(y.a,{autoFocus:!0,margin:"dense",id:"name",label:"Email Address",type:"email",fullWidth:!0})]}),Object(l.jsxs)(N.a,{children:[Object(l.jsx)(v.a,{onClick:r,color:"primary",children:"Cancel"}),Object(l.jsx)(v.a,{onClick:r,color:"primary",children:"Confirm reservation"})]})]})})},L=function(e){var t=e.type,r=e.message;return null===r?null:Object(l.jsx)("div",{className:t,children:Object(l.jsx)("p",{children:r})})},T=r(33),E=r.n(T),J={login:function(){var e=Object(m.a)(p.a.mark((function e(t){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/login",e.next=3,E.a.post("/login",t);case 3:return r=e.sent,a=r.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),register:function(){var e=Object(m.a)(p.a.mark((function e(t){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/register",e.next=3,E.a.post("/register",t);case 3:return r=e.sent,a=r.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getTimes:function(){var e=Object(m.a)(p.a.mark((function e(){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/get-times",e.next=3,E.a.get("/get-times");case 3:return t=e.sent,r=t.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),reservationDone:function(){var e=Object(m.a)(p.a.mark((function e(t){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/reservation/done",e.next=3,E.a.post("/reservation/done",t);case 3:return r=e.sent,a=r.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),reservationCancel:function(){var e=Object(m.a)(p.a.mark((function e(t){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/reservation/cancel",e.next=3,E.a.post("/reservation/cancel",t);case 3:return r=e.sent,a=r.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUserReservations:function(){var e=Object(m.a)(p.a.mark((function e(t){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/get-user-reservations",e.next=3,E.a.post("/get-user-reservations",t);case 3:return r=e.sent,a=r.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validateEmail:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},A=function(){var e=Object(a.useState)({state:!1,target:null}),t=Object(h.a)(e,2),r=t[0],n=t[1],s=Object(a.useState)([]),c=Object(h.a)(s,2),i=c[0],o=c[1],u=Object(a.useState)([]),j=Object(h.a)(u,2),d=j[0],b=j[1],v=Object(a.useState)({type:null,message:null}),y=Object(h.a)(v,2),w=y[0],N=y[1],k=function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o,e.next=3,J.getTimes();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("userLogged")).email,e.t0=b,e.next=4,J.getUserReservations({email:t});case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){k(),localStorage.getItem("userLogged")&&S()}),[]);var C=function(e,t){return N({type:e,message:t}),setTimeout((function(){N({type:null,message:null})}),5e3)},T=function(){var e=Object(m.a)(p.a.mark((function e(t){var r,a,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.target).classList.contains("run-out")){e.next=3;break}return e.abrupt("return",C("error","No taxis available for that hour"));case 3:if(!localStorage.getItem("userLogged")){e.next=26;break}if(a=JSON.parse(localStorage.getItem("userLogged")).email,r.classList.contains("reserved")){e.next=17;break}return e.next=8,J.reservationDone({email:a,hour:r.id});case 8:if("error"!==(s=e.sent).type){e.next=11;break}return e.abrupt("return",C(s.type,s.message));case 11:return C(s.type,s.message),k(),S(),e.abrupt("return",r.classList.toggle("reserved"));case 17:return e.next=19,J.reservationCancel({email:a,hour:r.id});case 19:if("error"!==(c=e.sent).type){e.next=22;break}return e.abrupt("return",C(c.type,c.message));case 22:return C(c.type,c.message),k(),S(),e.abrupt("return",r.classList.toggle("reserved"));case 26:n({state:!0,target:r});case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(m.a)(p.a.mark((function e(t){var a,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,"CANCEL"!==a.innerText){e.next=4;break}return e.abrupt("return",n({state:!1,target:null}));case 4:if(s=!!a.classList.contains("MuiButton-label")&&a.parentNode.parentNode.parentNode.childNodes[1].childNodes[1].childNodes[1].childNodes[0].value,!J.validateEmail(s)){e.next=16;break}return e.next=8,J.reservationDone({email:s,hour:r.target.id});case 8:if("error"!==(c=e.sent).type){e.next=11;break}return e.abrupt("return",C(c.type,c.message));case 11:return n({state:!1,target:null}),sessionStorage.setItem("guest",s),e.abrupt("return",window.location.replace("/guest-reservation-done"));case 16:C("error","Invalid email");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Taxi schedule"}),Object(l.jsx)(L,{message:w.message,type:w.type}),Object(l.jsx)(I,{open:r.state,setOpen:n,handleClose:E}),Object(l.jsxs)("ul",{className:"taxis-list-container",children:[Object(l.jsxs)("li",{className:"taxi-item-list",children:[Object(l.jsxs)("p",{className:"taxi-list-icon",children:[Object(l.jsx)(f.a,{}),"\xa0",Object(l.jsx)("span",{children:"Hour"})]}),Object(l.jsxs)("p",{className:"taxi-list-icon",children:[Object(l.jsx)(x.b,{}),"\xa0",Object(l.jsx)("span",{children:"Available taxis"})]}),Object(l.jsxs)("p",{className:"taxi-list-icon",children:[Object(l.jsx)(O.a,{}),"\xa0",Object(l.jsx)("span",{children:"Availability"})]})]}),i[0]?i.map((function(e){for(var t=0;t<d.length;t++)if(d[t].hour===e.hour)return Object(l.jsx)(g,{className:"taxi-item-list reserved",handleItemClick:T,hour:e.hour,availability:e.taxis_availability,state:"Reserved"},e.hour);return 0===e.taxis_availability?Object(l.jsx)(g,{className:"taxi-item-list run-out",handleItemClick:T,hour:e.hour,availability:e.taxis_availability,state:"No"},e.hour):Object(l.jsx)(g,{className:"taxi-item-list",handleItemClick:T,hour:e.hour,availability:e.taxis_availability,state:"Yes"},e.hour)})):null]})]})},D=r(64),R=function(){return Object(l.jsxs)("div",{className:"not-found",children:[Object(l.jsxs)("h2",{children:["Oops...\xa0\xa0",Object(l.jsx)(D.a,{})]}),Object(l.jsx)("p",{children:"Couldn't find the page you're looking for"}),Object(l.jsx)(i.b,{to:"/",className:"link",children:"To main Page"})]})},_=function(){var e=Object(a.useState)(""),t=Object(h.a)(e,2),r=t[0],n=t[1],s=Object(a.useState)(""),c=Object(h.a)(s,2),i=c[0],u=c[1],j=Object(a.useState)({type:null,message:null}),d=Object(h.a)(j,2),b=d[0],g=d[1];if(localStorage.getItem("userLogged"))return Object(l.jsx)(o.a,{to:"/"});var x=function(){var e=Object(m.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,J.login({email:r,password:i});case 3:if("error"!==(a=e.sent).type){e.next=6;break}return e.abrupt("return",O(a.type,a.message));case 6:localStorage.setItem("userLogged",JSON.stringify(a)),window.location.replace("/");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e,t){return g({type:e,message:t}),setTimeout((function(){g({type:null,message:null})}),5e3)};return Object(l.jsxs)("div",{className:"login-component",children:[Object(l.jsx)("h2",{children:"Login"}),Object(l.jsx)(L,{type:b.type,message:b.message}),Object(l.jsxs)("form",{onSubmit:x,className:"login-form",children:[Object(l.jsx)("div",{className:"form-field",children:Object(l.jsx)("input",{type:"email",name:"email",id:"email",value:r,onChange:function(e){var t=e.target;return n(t.value)},placeholder:"Email"})}),Object(l.jsx)("div",{className:"form-field",children:Object(l.jsx)("input",{type:"password",name:"password",id:"password",value:i,onChange:function(e){var t=e.target;return u(t.value)},placeholder:"Password"})}),Object(l.jsx)("button",{className:"login-button",children:"Login"})]})]})},q=function(){var e=Object(a.useState)(""),t=Object(h.a)(e,2),r=t[0],n=t[1],s=Object(a.useState)(""),c=Object(h.a)(s,2),i=c[0],u=c[1],j=Object(a.useState)(""),d=Object(h.a)(j,2),b=d[0],g=d[1],x=Object(a.useState)({type:null,message:null}),O=Object(h.a)(x,2),f=O[0],v=O[1];if(localStorage.getItem("resultLogged"))return Object(l.jsx)(o.a,{to:"/"});var y=function(){var e=Object(m.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,J.register({name:r,email:i,password:b});case 3:if("error"!==(a=e.sent).type){e.next=6;break}return e.abrupt("return",w(a.type,a.message));case 6:"success"===a.type&&setTimeout(Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.login({email:i,password:b});case 2:if("error"!==(t=e.sent).type){e.next=5;break}return e.abrupt("return",w(t.type,t.message));case 5:localStorage.setItem("userLogged",JSON.stringify(t)),window.location.replace("/");case 7:case"end":return e.stop()}}),e)}))),1e3);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e,t){return v({type:e,message:t}),setTimeout((function(){v({type:null,message:null})}),5e3)};return Object(l.jsxs)("div",{className:"register-component",children:[Object(l.jsx)("h2",{children:"Register"}),Object(l.jsx)(L,{type:f.type,message:f.message}),Object(l.jsxs)("form",{onSubmit:y,className:"login-form",children:[Object(l.jsx)("div",{className:"form-field",children:Object(l.jsx)("input",{type:"text",name:"name",id:"name",value:r,onChange:function(e){var t=e.target;return n(t.value)},placeholder:"Name",required:!0})}),Object(l.jsx)("div",{className:"form-field",children:Object(l.jsx)("input",{type:"email",name:"email",id:"email",value:i,onChange:function(e){var t=e.target;return u(t.value)},placeholder:"Email",required:!0})}),Object(l.jsx)("div",{className:"form-field",children:Object(l.jsx)("input",{type:"password",name:"password",id:"password",value:b,onChange:function(e){var t=e.target;return g(t.value)},placeholder:"Password",required:!0})}),Object(l.jsx)("button",{className:"login-button",children:"Register"})]})]})},P=function(){var e=Object(a.useState)({type:null,message:null}),t=Object(h.a)(e,2),r=t[0],n=t[1];return Object(a.useEffect)((function(){n({type:"success",message:"Successful reservation"}),setTimeout((function(){n({type:null,message:null}),sessionStorage.removeItem("guest")}),5e3)}),[]),localStorage.getItem("userLogged")?Object(l.jsx)(o.a,{to:"/"}):sessionStorage.getItem("guest")?Object(l.jsxs)("div",{className:"guest-reservation",children:[Object(l.jsx)(L,{type:r.type,message:r.message}),Object(l.jsxs)("h2",{children:["Thanks for the reservation!\xa0\xa0",Object(l.jsx)(x.a,{})]}),Object(l.jsxs)("p",{children:["If you need to cancel the reservation, please get it contact with us at ",Object(l.jsx)("span",{children:"john@doe.com"})]}),Object(l.jsx)(i.b,{to:"/",className:"link",children:"To main Page"})]}):Object(l.jsx)(o.a,{to:"/"})};r(107);var M=function(){return Object(l.jsx)(i.a,{children:Object(l.jsxs)(o.d,{children:[Object(l.jsx)(o.b,{exact:!0,path:"/",children:Object(l.jsx)(d,{children:Object(l.jsx)(A,{})})}),Object(l.jsx)(o.b,{exact:!0,path:"/login",children:Object(l.jsx)(d,{children:Object(l.jsx)(_,{})})}),Object(l.jsx)(o.b,{exact:!0,path:"/register",children:Object(l.jsx)(d,{children:Object(l.jsx)(q,{})})}),Object(l.jsx)(o.b,{exact:!0,path:"/guest-reservation-done",children:Object(l.jsx)(d,{children:Object(l.jsx)(P,{})})}),Object(l.jsx)(o.b,{children:Object(l.jsx)(d,{children:Object(l.jsx)(R,{})})})]})})};c.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(M,{})}),document.getElementById("root"))}},[[108,1,2]]]);
//# sourceMappingURL=main.07717438.chunk.js.map